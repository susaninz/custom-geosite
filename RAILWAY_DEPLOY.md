# üöÄ Deploy –Ω–∞ Railway - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ - –ó–ê–í–ï–†–®–ï–ù–ê!

- ‚úÖ Railway –∞–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω ($5/–º–µ—Å –æ–ø–ª–∞—á–µ–Ω)
- ‚úÖ Telegram –±–æ—Ç —Å–æ–∑–¥–∞–Ω: [@openwrtrouterbot](https://t.me/openwrtrouterbot)
- ‚úÖ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: [openwrtrouter](https://github.com/susaninz/openwrtrouter)
- ‚úÖ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: [custom-geosite](https://github.com/susaninz/custom-geosite)
- ‚úÖ –í—Å–µ —Ç–æ–∫–µ–Ω—ã —Å–æ–±—Ä–∞–Ω—ã
- ‚úÖ Flask –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ

---

## üéØ –§–∞–∑–∞ 3: Deploy –Ω–∞ Railway

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –Ω–∞ Railway

1. –û—Ç–∫—Ä–æ–π—Ç–µ: **https://railway.app/new**
2. –í—ã–±–µ—Ä–∏—Ç–µ: **"Deploy from GitHub repo"**
3. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ Railway –≤ GitHub
4. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: **`susaninz/openwrtrouter`**
5. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç Procfile

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Root Directory

Railway –¥–æ–ª–∂–µ–Ω —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ø–∞–ø–∫—É —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º:

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ **"Settings"**
2. –ù–∞–π–¥–∏—Ç–µ **"Root Directory"**
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: **`plugins/openclash/geosite-manager/railway-bot`**
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 3: –î–æ–±–∞–≤—å—Ç–µ Environment Variables

–í —Ä–∞–∑–¥–µ–ª–µ **"Variables"** –¥–æ–±–∞–≤—å—Ç–µ —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

**–í–ê–ñ–ù–û:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –†–ï–ê–õ–¨–ù–´–ï –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ `.env` –≤ –ø–∞–ø–∫–µ `railway-bot/`!

```
TELEGRAM_BOT_TOKEN=<your_telegram_bot_token>
TELEGRAM_CHAT_ID=<your_chat_id>
GITHUB_TOKEN=<your_github_token>
GITHUB_REPO=susaninz/custom-geosite
WEBHOOK_SECRET=<your_webhook_secret_from_env>
GEOSITE_CATEGORIES=category-ads-all,google,youtube,apple,netflix,github,cloudflare,steam
RAM_THRESHOLD=85
CPU_THRESHOLD=3.0
```

**–ì–¥–µ –≤–∑—è—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è:**
- –í—Å–µ —Ç–æ–∫–µ–Ω—ã –µ—Å—Ç—å –≤ —Ñ–∞–π–ª–µ `plugins/openclash/geosite-manager/railway-bot/.env`
- –ò–ª–∏ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤—ã–≤–æ–¥ –≤—ã—à–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ

### –®–∞–≥ 4: Deploy!

1. –ù–∞–∂–º–∏—Ç–µ **"Deploy"** –∏–ª–∏ Railway —Å–¥–µ–ª–∞–µ—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è (~2-3 –º–∏–Ω—É—Ç—ã)
3. –í—ã —É–≤–∏–¥–∏—Ç–µ –∑–µ–ª–µ–Ω—É—é –≥–∞–ª–æ—á–∫—É ‚úÖ

### –®–∞–≥ 5: –ü–æ–ª—É—á–∏—Ç–µ URL –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

1. –í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞–π–¥–∏—Ç–µ **"Settings"** ‚Üí **"Networking"**
2. –ù–∞–∂–º–∏—Ç–µ **"Generate Domain"**
3. Railway —Å–æ–∑–¥–∞—Å—Ç –¥–æ–º–µ–Ω —Ç–∏–ø–∞: `geosite-bot-production.up.railway.app`
4. **–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–æ—Ç URL!**

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# –ó–∞–º–µ–Ω–∏—Ç–µ YOUR_DOMAIN –Ω–∞ –≤–∞—à –¥–æ–º–µ–Ω Railway
curl https://YOUR_DOMAIN.up.railway.app/health

# –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å:
{
  "status": "healthy",
  "timestamp": "...",
  "metrics_count": 0
}
```

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å:

```bash
curl https://YOUR_DOMAIN.up.railway.app/status

# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

---

## üìä –ß—Ç–æ –¥–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:

### 1. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ Railway URL –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞

–î–ª—è —Å–∫—Ä–∏–ø—Ç–∞ –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è:
```bash
RAILWAY_URL="https://YOUR_DOMAIN.up.railway.app"
WEBHOOK_SECRET="<your_webhook_secret_from_env>"
```

–†–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –±–µ—Ä–∏—Ç–µ –∏–∑ `.env` —Ñ–∞–π–ª–∞!

### 2. –ù–∞—á–Ω–∏—Ç–µ –§–∞–∑—É 4: –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞

- –°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ geosite –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- –°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–æ—É—Ç–µ—Ä–∞

---

## üîß Troubleshooting

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
1. –í Railway ‚Üí –≤–∞—à –ø—Ä–æ–µ–∫—Ç ‚Üí "Logs"
2. –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ Python

**–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Root Directory
- ‚ùå –ù–µ –≤—Å–µ environment variables –¥–æ–±–∞–≤–ª–µ–Ω—ã
- ‚ùå –û—à–∏–±–∫–∞ –≤ requirements.txt

### Deploy failed

**–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:**
- ‚úÖ Root Directory –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- ‚úÖ Procfile —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- ‚úÖ requirements.txt –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π
- ‚úÖ Python –≤–µ—Ä—Å–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–∞ (3.11.6)

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Railway
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ environment variables
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ Root Directory –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –¥–µ–ø–ª–æ—è

- [ ] –ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –Ω–∞ Railway
- [ ] Root Directory —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `plugins/openclash/geosite-manager/railway-bot`
- [ ] –í—Å–µ 8 environment variables –¥–æ–±–∞–≤–ª–µ–Ω—ã
- [ ] Deploy —É—Å–ø–µ—à–µ–Ω (–∑–µ–ª–µ–Ω–∞—è –≥–∞–ª–æ—á–∫–∞)
- [ ] Domain —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- [ ] /health endpoint –æ—Ç–≤–µ—á–∞–µ—Ç
- [ ] /status endpoint –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–ö–æ–≥–¥–∞ –≤—Å–µ ‚úÖ - –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –∫ –§–∞–∑–µ 4!**

